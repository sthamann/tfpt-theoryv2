{
  "checks": [
    {
      "check_id": "flavor_policy_present",
      "detail": "policy from flavor_texture_v24.json",
      "passed": true,
      "severity": "PASS"
    },
    {
      "check_id": "phase_selection_rule_filter_only",
      "detail": "topology + CKM phase selection are filter_only",
      "passed": true,
      "severity": "PASS"
    },
    {
      "check_id": "upstream_ckm_present",
      "detail": "ckm_full_pipeline/results.json present",
      "passed": true,
      "severity": "PASS"
    },
    {
      "check_id": "upstream_pmns_present",
      "detail": "pmns_full_pipeline/results.json present",
      "passed": true,
      "severity": "PASS"
    },
    {
      "check_id": "topology_phase_map_present",
      "detail": "topology_phase_map/results.json present",
      "passed": true,
      "severity": "PASS"
    },
    {
      "check_id": "ckm_variants_present",
      "detail": "4 CKM variants available",
      "passed": true,
      "severity": "PASS"
    },
    {
      "check_id": "topology_filter_applied",
      "detail": "all CKM variants originate from topology_phase_map",
      "passed": true,
      "severity": "PASS"
    },
    {
      "check_id": "pmns_chi2_present",
      "detail": "chi2_pmns_mt=3.201078401918528",
      "passed": true,
      "severity": "PASS"
    },
    {
      "check_id": "mass_ratio_anchor",
      "detail": "delta_used=0.6088619920294742",
      "passed": true,
      "severity": "PASS"
    },
    {
      "check_id": "mass_ratio_penalty_computed",
      "detail": "chi2_mass_ratio=0.759652",
      "passed": true,
      "severity": "PASS"
    },
    {
      "check_id": "joint_objective_computed",
      "detail": "4 rows; best=topology_delta_cp_1",
      "passed": true,
      "severity": "PASS"
    },
    {
      "check_id": "joint_search_space_is_discrete",
      "detail": "objective aggregates discrete upstream scans; no continuous fitter",
      "passed": true,
      "severity": "PASS"
    },
    {
      "check_id": "joint_pvalue_ok",
      "detail": "p=0.7394445667780781 chi2=9.433851425511474 dof=13",
      "passed": true,
      "severity": "PASS"
    }
  ],
  "module_id": "flavor_joint_objective_scan",
  "plot": null,
  "results": {
    "best": {
      "chi2_ckm_refscale": 5.47312067032751,
      "chi2_mass_ratio": 0.7596523532654351,
      "chi2_pmns_mt": 3.201078401918528,
      "delta_mode": "external_delta_cp_override",
      "label": "topology_delta_cp_1",
      "objective": 9.433851425511474,
      "s13_mode": "A_lam3_times_1_minus_delta",
      "w_mass_ratio": 1.0,
      "w_pmns": 1.0
    },
    "ckm": {
      "variants": [
        {
          "chi2_ckm_refscale": 5.47312067032751,
          "chi2_mass_ratio": 0.7596523532654351,
          "chi2_pmns_mt": 3.201078401918528,
          "delta_mode": "external_delta_cp_override",
          "label": "topology_delta_cp_1",
          "objective": 9.433851425511474,
          "s13_mode": "A_lam3_times_1_minus_delta",
          "w_mass_ratio": 1.0,
          "w_pmns": 1.0
        },
        {
          "chi2_ckm_refscale": 5.47312067032751,
          "chi2_mass_ratio": 0.7596523532654351,
          "chi2_pmns_mt": 3.201078401918528,
          "delta_mode": "external_delta_cp_override",
          "label": "topology_delta_cp_2",
          "objective": 9.433851425511474,
          "s13_mode": "A_lam3_times_1_minus_delta",
          "w_mass_ratio": 1.0,
          "w_pmns": 1.0
        },
        {
          "chi2_ckm_refscale": 249.17549471660502,
          "chi2_mass_ratio": 0.7596523532654351,
          "chi2_pmns_mt": 3.201078401918528,
          "delta_mode": "external_delta_cp_override",
          "label": "topology_delta_cp_4",
          "objective": 253.13622547178898,
          "s13_mode": "A_lam3_times_1_minus_delta",
          "w_mass_ratio": 1.0,
          "w_pmns": 1.0
        },
        {
          "chi2_ckm_refscale": 249.17549471670628,
          "chi2_mass_ratio": 0.7596523532654351,
          "chi2_pmns_mt": 3.201078401918528,
          "delta_mode": "external_delta_cp_override",
          "label": "topology_delta_cp_3",
          "objective": 253.13622547189024,
          "s13_mode": "A_lam3_times_1_minus_delta",
          "w_mass_ratio": 1.0,
          "w_pmns": 1.0
        }
      ]
    },
    "joint": {
      "chi2": 9.433851425511474,
      "dof_proxy": 13,
      "p_value": 0.7394445667780781
    },
    "mass_ratio": {
      "chi2": 0.7596523532654351,
      "detail": {
        "chi2_mu_over_e": 0.7449137186425691,
        "chi2_tau_over_mu": 0.01473863462286608,
        "rel_mu_over_e": -0.043154192109300604,
        "rel_tau_over_mu": 0.006070138924041624,
        "tolerance_rel": 0.05
      },
      "tolerance_rel": 0.05
    },
    "mode": "engineering",
    "pmns": {
      "chi2_mt": 3.201078401918528
    },
    "topology_docking": {
      "pairs": 14
    },
    "weights": {
      "w_mass_ratio": 1.0,
      "w_pmns": 1.0
    }
  },
  "schema_version": 1,
  "spec": {
    "assumptions": [],
    "determinism": "Deterministic given upstream artifacts.",
    "formulas": [
      "objective = chi2_ckm_refscale + w_pmns * chi2_pmns_mt + w_mass_ratio * chi2_mass_ratio"
    ],
    "gaps": [
      "Full topology\u2192phase map integration requires wiring topology_phase_map candidates into the CKM/PMNS generators (currently this module aggregates the existing discrete scans)."
    ],
    "inputs": [
      "upstream module outputs in out/: ckm_full_pipeline/results.json, pmns_full_pipeline/results.json",
      "topology_phase_map/results.json (discrete candidate set size; docking point)",
      "flavor texture policy: tfpt_suite/data/flavor_texture_v24.json",
      "lepton masses: tfpt_suite/data/lepton_masses_pdg.json"
    ],
    "maturity": null,
    "module_id": "flavor_joint_objective_scan",
    "name": "Flavor joint objective scan (CKM + PMNS \u03c7\u00b2 aggregation; discrete wiring)",
    "objective": [
      "Provide a single joint score used by Physics-mode gates (prevents two separate heuristic narratives).",
      "Keep the search space strictly discrete (no free floats)."
    ],
    "outputs": [
      "joint objective table over discrete CKM variants (\u03c7\u00b2_CKM + w1\u00b7\u03c7\u00b2_PMNS + w2\u00b7Mass_Ratio_Penalty)",
      "best candidate under the declared objective",
      "diagnostic joint p-value"
    ],
    "question": "Given the discrete CKM variants and the PMNS best convention, what is the joint objective and which discrete variant wins?",
    "references": [],
    "validation": [
      "objective is finite and computed from discrete upstream variants (no continuous fitter)",
      "module is explicit about missing upstream artifacts"
    ],
    "what_was_done": []
  },
  "warnings": []
}
